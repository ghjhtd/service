# 服务器管理系统 (Server Management System)

## 项目描述
服务器管理系统是一个用于对Ubuntu服务器进行完全控制和配置的工具。该系统提供Web界面作为后台系统，帮助用户更好地使用和管理服务器上的各个项目。

## 功能特点
- 管理同级目录中的所有项目文件夹
- 提供统一的项目脚本结构(start.sh, stop.sh, build.sh)
- 控制项目的开机自启、启动顺序
- 设置定时启动和定时任务执行
- 集成Cron系统进行任务调度
- 提供友好的Web界面进行操作
- 管理系统服务(systemd)，自动发现、控制和监控服务
- 将项目和脚本转换为系统服务

## 项目结构
```
service/
├── backend/            # 后端服务
│   ├── controllers/    # 控制器
│   ├── models/         # 数据模型
│   ├── routes/         # 路由
│   ├── utils/          # 工具函数
│   ├── app.js          # 主应用
│   └── server.js       # 服务器启动
├── frontend/           # 前端应用
│   ├── public/         # 静态资源
│   └── src/            # 源代码
│       ├── components/ # 组件
│       └── pages/      # 页面
├── config/             # 配置文件
│   ├── projects.json   # 项目配置
│   ├── cron.json       # 定时任务配置
│   ├── system.json     # 系统配置
│   └── hidden_services.json # 隐藏服务配置
├── scripts/            # 系统脚本
│   ├── start.sh        # 启动系统
│   ├── stop.sh         # 停止系统
│   ├── install.sh      # 安装依赖
│   └── utils/          # 工具脚本
└── docs/               # 文档
    └── README.md       # 项目说明
```

## 项目标准
对于每个被管理的项目，需要遵循以下标准：
1. 每个项目必须包含以下脚本：
   - `start.sh`: 启动项目
   - `stop.sh`: 停止项目
   - `build.sh`: 构建项目（特别是前端项目）
2. 项目配置在`config/projects.json`中定义，包括：
   - 项目名称和路径
   - 是否开机自启
   - 启动顺序
   - 定时启动设置

## Cursor规则
在使用Cursor编辑器进行本项目开发时，请遵循以下规则：

1. 文档更新规则
   - 每次功能变更或修复Bug后必须更新README.md
   - 更新格式为`### [YYYY-MM-DD] 更新标题`，下方列出具体更改
   - 日期格式必须严格遵循YYYY-MM-DD形式
   - 主要变更必须包含功能描述和技术实现要点

2. 代码规范
   - 后端代码注释必须使用中文
   - API接口必须在routes文件夹中定义并在controllers文件夹中实现
   - 前端组件必须在components文件夹中，页面必须在pages文件夹中
   - 配置文件必须放在config文件夹中

3. 开发流程
   - 功能开发前必须先审阅README.md了解整体结构
   - 完成功能后必须更新相关文档
   - 提交前必须成功构建和测试

## 更新记录
### [2024-05-22] 服务管理系统增强
- 修复了systemd服务权限问题，解决了服务停止失败的问题
- 添加服务隐藏功能，支持在前端隐藏不常用服务
- 新增服务日志查看功能，可实时刷新查看systemd服务日志
- 新增服务脚本编辑功能，支持在前端编辑systemd服务文件
- 增加了服务重载(reload)按钮，用于重新加载服务配置
- 更新了README.md，添加了Cursor规则章节

### [2024-05-21] 前端构建兼容性修复
- 解决了高版本Node.js(v22+)构建React应用的兼容性问题
- 在构建脚本中添加`NODE_OPTIONS=--openssl-legacy-provider`环境变量
- 完善了前端构建检查逻辑，确保index.html文件存在

### [2024-05-21] 系统一键启动优化
- 改进脚本，实现前端自动构建和部署
- 优化`install.sh`和`start.sh`流程，支持全栈一键启动
- 添加基础前端界面框架
- 添加`restart.sh`重构功能，支持`--rebuild`参数重新构建前端

### [2024-05-21] 系统配置优化
- 修改系统默认端口从3000为9999，提高安全性
- 更新CORS配置和启动脚本中相应的端口引用

### [2024-04-02] 初始版本
- 创建基本项目结构
- 添加项目文档
- 规划系统功能

## 维护指南
1. 每次对项目进行更改时，必须在此文档的"更新记录"部分添加相应条目
2. 更新记录格式：`### [YYYY-MM-DD] 更新标题` 下列出具体更改
3. 确保代码遵循项目结构规范
4. 所有配置修改应通过Web界面进行，避免直接编辑配置文件
5. 使用Cursor进行编程时，请参考此文档了解项目结构和设计理念 


TODO Docker容器的完全管理
TODO 每一项增加标签筛选功能